---

- name: Add Ansible Repository
  apt_repository: repo='ppa:ansible/ansible' state=present 

- name: Install ansible
  apt: name={{ item }} state=installed force=yes update_cache=yes
  with_items:
    - ansible
    - python-software-properties
    - language-pack-en

- name: deploy the ansible.cfg file
  template: src=ansible.cfg.j2 dest=/home/vagrant/ansible.cfg force=yes owner=vagrant mode=0644

- name: deploy /etc/hosts file
  template: src=hosts.j2 dest=/etc/hosts force=yes

- name: turn off strict host-key checking
  template: src=ssh_config.j2 dest=/home/vagrant/.ssh/config

- name: ensure private key and public one are present
  copy: src="{{ item }}" dest="/home/vagrant/.ssh/{{ item }}" owner=vagrant mode=0600
  with_items:
   - id_rsa.pub
   - id_rsa
